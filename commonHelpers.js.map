{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// створи функції для відображення елементів інтерфейсу\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nvar lightbox = new SimpleLightbox('.gallery a', { \n        captionsData: \"alt\",\n        captionDelay: 250\n    });\n\nconst per_page = 15;\n\nfunction renderGallery(hits, gallery) {\n    gallery.innerHTML = hits.map((pic) => `\n      <li class=\"gallery-item\">\n        <a href=\"${pic.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${pic.webformatURL}\" alt=\"${pic.tags}\" />\n        </a>\n        <div class=\"info\">\n          <div class=\"field\">\n            <b class=\"label\">Likes</b>\n            <span class=\"value\" data-likes>${pic.likes}</span>\n          </div>\n          <div class=\"field\">\n            <b class=\"label\">Views</b>\n            <span class=\"value\" data-views>${pic.views}</span>\n          </div>\n          <div class=\"field\">\n            <b class=\"label\">Commments</b>\n            <span class=\"value\" data-commments>${pic.comments}</span>\n          </div>\n          <div class=\"field\">\n            <b class=\"label\">Downloads</b>\n            <span class=\"value\" data-downloads>${pic.downloads}</span>\n          </div>\n        </div>\n      </li>`\n    ).join(\"\");\n\n    lightbox.refresh();\n};\n\nfunction renderGalleryMore(hits, gallery) {\n  const markup = hits.map((pic) => `\n      <li class=\"gallery-item\">\n        <a href=\"${pic.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${pic.webformatURL}\" alt=\"${pic.tags}\" />\n        </a>\n        <div class=\"info\">\n          <div class=\"field\">\n            <b class=\"label\">Likes</b>\n            <span class=\"value\" data-likes>${pic.likes}</span>\n          </div>\n          <div class=\"field\">\n            <b class=\"label\">Views</b>\n            <span class=\"value\" data-views>${pic.views}</span>\n          </div>\n          <div class=\"field\">\n            <b class=\"label\">Commments</b>\n            <span class=\"value\" data-commments>${pic.comments}</span>\n          </div>\n          <div class=\"field\">\n            <b class=\"label\">Downloads</b>\n            <span class=\"value\" data-downloads>${pic.downloads}</span>\n          </div>\n        </div>\n      </li>`\n    ).join(\"\");\n  gallery.insertAdjacentHTML(\"beforeend\", markup); \n\n  lightbox.refresh();\n};\n\nfunction renderLoadBtn(totalPages, loadContainer, currentPage) {\n  if (totalPages === currentPage) {\n    loadContainer.innerHTML = \"\";\n    if (totalPages > 1) {\n      iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n  } else if (totalPages > 1) {\n    loadContainer.innerHTML = `<button class=\"load-button\">Load more</button>`;\n  } else {\n    loadContainer.innerHTML = \"\";\n  }\n\n\n}\n\nexport { renderGallery,  renderLoadBtn, renderGalleryMore};\n","// зберігай функції для HTTP-запитів.\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { renderGallery, renderLoadBtn, renderGalleryMore } from \"./render-functions\";\nimport axios from 'axios';\n\nconst MY_KEY = \"43507759-1cdf1229fe6b1935ead7e315b\";\nconst loading = `<span class=\"loader\"></span>`;\n\nlet page = 1;\nconst per_page = 15;\nlet totalPages;\nlet searchTerm;\n\nasync function getFirstImages(q, gallery, loadContainer) {\n    loadContainer.innerHTML = \"\";\n    page = 1;\n    searchTerm = q;\n\n    gallery.innerHTML = loading;\n    try {\n        const { data } = await axios('https://pixabay.com/api/', {\n            params: {\n                key: MY_KEY,\n                q,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page,\n                page\n            }\n        });\n        totalPages = Math.ceil(data.totalHits / per_page);\n        \n        if (data.hits.length === 0) {\n            gallery.innerHTML = \"\";\n            iziToast.error({ message: \"Sorry, there are no images matching your search query. Please try again!\" })\n        } else {\n            renderGallery(data.hits, gallery);\n            renderLoadBtn(totalPages, loadContainer, page);\n        }\n    } catch (error) {\n        iziToast.error({ message: error.message })\n    }\n}\n\nasync function getNextImages(gallery, loadContainer) {\n    page += 1;\n    loadContainer.innerHTML = loading;\n    const rect = gallery.children[0].getBoundingClientRect();\n    try {\n        const {data} = await axios('https://pixabay.com/api/', {\n            params: {\n                key: MY_KEY,\n                q: searchTerm,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page,\n                page\n            }\n        });\n        renderGalleryMore(data.hits, gallery);\n        renderLoadBtn(totalPages, loadContainer, page);\n        window.scrollBy({\n            top: (rect.height * 2),\n            behavior: \"smooth\"\n        });\n    } catch (error) {\n        iziToast.error({ message: error.message })\n    }\n}\n\nexport { getFirstImages, getNextImages };","import { getFirstImages, getNextImages } from \"./js/pixabay-api\";\n\nconst form = document.querySelector(\".container\")\nconst searchTerm = document.querySelector(\".searchTerm\");\nconst gallery = document.querySelector(\".gallery\");\nform.addEventListener(\"submit\", onFormSubmit);\nconst loadContainer = document.querySelector(\".load-container\");\nloadContainer.addEventListener(\"click\", onLoadClick)\n\n\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n    getFirstImages(searchTerm.value, gallery, loadContainer);\n}\n\nfunction onLoadClick(e) {\n    if (e.target.nodeName != \"BUTTON\") return;\n    e.preventDefault();\n    getNextImages(gallery, loadContainer);\n}"],"names":["lightbox","SimpleLightbox","renderGallery","hits","gallery","pic","renderGalleryMore","markup","renderLoadBtn","totalPages","loadContainer","currentPage","iziToast","MY_KEY","loading","page","per_page","searchTerm","getFirstImages","q","data","axios","error","getNextImages","rect","form","onFormSubmit","onLoadClick","e"],"mappings":"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"}